{% extends "base.html" %}

{% block title %}Progrify Access{% endblock %}

{% block additional_styles %}
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 50px;
    }
    #whop-widget {
        width: 100%;
        max-width: 400px;
        margin: 30px auto;
        min-height: 500px;
    }
</style>
{% endblock %}

{% block content %}
<h1>Progrify Access Portal</h1>
<div id="whop-widget"></div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.whop.com/js/embed.js"></script>
<script>
    window.whopWidget.initialize({
        sellerId: "your_seller_id",  // REPLACE WITH YOUR ACTUAL SELLER ID
        productId: "your_product_id", // REPLACE WITH YOUR ACTUAL PRODUCT ID
        containerId: "whop-widget",
        onSuccess: function(data) {
            localStorage.setItem("whop_token", data.token);
            window.location.href = "/index";
        },
        onFailure: function(error) {
            alert("Verification failed: " + error.message);
        }
    });
</script>
{% endblock %}
